import{u as P,a as x,b as Q,Q as T}from"./QTabs.f28d9f0f.js";import{v as f,b9 as V,h as D,A as k,ba as O,at as C,bb as S,au as E,bc as B,c as L,a_ as N,g as j,M as v,r as A,aM as g,aH as F,j as p,k as b,l as r,d as a,N as l,a0 as I,F as M,aI as U,a1 as $}from"./index.6fdc5749.js";import{Q as H}from"./QSeparator.484891f0.js";import{Q as q,a as y}from"./QTable.e29c380e.js";import"./use-key-composition.c8fffae3.js";import"./use-prevent-scroll.b5993834.js";import"./QResizeObserver.6857ef3c.js";import"./QMenu.6f89aa27.js";import"./position-engine.8f2ed70e.js";import"./QChip.10b328f3.js";import"./QItemLabel.1e968400.js";import"./format.2a3572e1.js";import"./QCheckbox.075c3f6f.js";var w=f({name:"QTab",props:P,emits:x,setup(i,{slots:s,emit:d}){const{renderTab:n}=Q(i,s,d);return()=>n("div")}}),h=f({name:"QTabPanel",props:V,setup(i,{slots:s}){return()=>D("div",{class:"q-tab-panel",role:"tabpanel"},k(s.default))}}),z=f({name:"QTabPanels",props:{...O,...C},emits:S,setup(i,{slots:s}){const d=j(),n=E(i,d.proxy.$q),{updatePanelsList:c,getPanelContent:m,panelDirectives:e}=B(),o=L(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(c(s),N("div",{class:o.value},m(),"pan",i.swipeable,()=>e.value))}});const G={id:"orders"},J={class:"row"},K={class:"q-pa-xl col-12"},R={class:"div q-px-xl row"},W={class:"col-12"},X={class:"div q-px-x l row"},Y={class:"col-12"},Z=["src"],pe={__name:"OrdersView",setup(i){const s=v([]),d=v([]),n=A("productsOrder"),c=[{name:"name",required:!0,label:"\u8A02\u55AE\u7DE8\u865F",align:"left",field:e=>e._id,sortable:!0},{name:"date",required:!0,label:"\u8A02\u55AE\u65E5\u671F",align:"left",field:e=>new Date(e.date).toLocaleDateString(),sortable:!0},{name:"price",required:!0,label:"\u8A02\u55AE\u91D1\u984D",align:"left",field:e=>e.totalPrice,sortable:!0},{name:"content",label:"\u8A02\u55AE\u5167\u5BB9",align:"left"}],m=[{name:"title",required:!0,label:"\u540D\u7A31",align:"left",field:e=>e.title},{name:"price",required:!0,label:"\u8CBB\u7528",align:"left",field:e=>e.price,format:e=>`${e}`,sortable:!0},{name:"daysfrom",required:!0,label:"\u958B\u59CB\u65E5\u671F",align:"left",field:e=>e.daysfrom},{name:"daysto",required:!0,label:"\u7D50\u675F\u65E5\u671F",align:"left",field:e=>e.daysto},{name:"description",required:!0,label:"\u7C21\u4ECB",align:"left",field:e=>e.description},{name:"lecturer",required:!0,label:"\u8B1B\u8005",align:"left",field:e=>e.lecturer},{name:"image",required:!0,label:"\u5716\u7247",align:"left",field:e=>e.image}];return(async()=>{try{const{data:e}=await g.get("/orders");s.push(...e.result.map(t=>(t.totalPrice=t.products.reduce((u,_)=>u+_.p_id.price*_.quantity,0),t)));const{data:o}=await g.get("/events/me");d.push(...o.result)}catch(e){console.log(e),F.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u8A02\u55AE\u5931\u6557"})}})(),(e,o)=>(p(),b("div",G,[r("div",J,[r("div",K,[a(I,null,{default:l(()=>[a(T,{class:"tabs-text text-grey",modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value=t),dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:l(()=>[a(w,{class:"text-h3",name:"productsOrder",label:"\u6211\u7684\u5546\u54C1\u8A02\u55AE"}),a(w,{name:"eventsOrder",label:"\u6211\u7684\u8AB2\u7A0B\u6D3B\u52D5\u8CC7\u8A0A "})]),_:1},8,["modelValue"]),a(H),a(z,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=t=>n.value=t),animated:""},{default:l(()=>[a(h,{name:"productsOrder"},{default:l(()=>[r("div",R,[r("div",W,[a(q,{columns:c,rows:s},{"body-cell-content":l(t=>[a(y,null,{default:l(()=>[r("ul",null,[(p(!0),b(M,null,U(t.row.products,u=>(p(),b("li",null,[r("p",null,$(u.quantity+" \u500B "+u.p_id.name),1)]))),256))])]),_:2},1024)]),_:1},8,["rows"])])])]),_:1}),a(h,{name:"eventsOrder"},{default:l(()=>[r("div",X,[r("div",Y,[a(q,{columns:m,rows:d},{"body-cell-image":l(t=>[a(y,null,{default:l(()=>[r("img",{src:t.row.image,style:{height:"100px"}},null,8,Z)]),_:2},1024)]),_:1},8,["rows"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]))}};export{pe as default};
