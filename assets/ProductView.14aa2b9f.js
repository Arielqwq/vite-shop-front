import{r as p,aZ as Q,M as P,N as S,W as $,O as y,aT as x,a_ as w,aV as c,j as n,k as g,l,d as o,a8 as B,a6 as _,P as i,U as L,F as N,aW as j,a7 as A,R as D,G as f,Z as R,a0 as U,aX as F,aY as I,q as M,a5 as O,a$ as T,b0 as Y,a2 as E,$ as W,a9 as Z}from"./index.5eb36ec9.js";const z={id:"productView"},G={class:"showProduct row flex justify-center"},K={class:"product-img col-12 col-lg-3 flex justify-center"},X={class:"product-content col-10 col-lg-5"},H={class:"q-my-lg"},J={class:"q-my-lg"},ee={class:"pre q-my-lg"},te={class:"recomProduct row flex justify-center"},se=l("div",{class:"col-6"},[l("div",{class:"text-h5"},"YOU MAY ALSO LIKE")],-1),ae={class:"col-7 row",style:{margin:"50px"}},le=l("h5",{class:"text-white text-weight-bold"},"\u8CE3\u5B8C\u310C\u9912",-1),ie={__name:"ProductView",setup(oe){p(null);const d=Q(),h=P(),b=S(),{editCart:k,isLogin:q}=$(b),u=p(0),r=p(!1),v={required(e){return!!e||"\u6B04\u4F4D\u5FC5\u586B"},number(e){return e>0||"\u6578\u91CF\u932F\u8AA4"}},t=y({_id:"",name:"",price:0,description:"",image:"",images:[],sell:!0,category:""}),m=y([]),C=()=>{k({_id:t._id,quantity:u.value,text:"\u52A0\u5165\u8CFC\u7269\u8ECA"})},V=async()=>{var e,a;try{const{data:s}=await w.post("/users/love",{p_id:d.params.id,love:!r.value});r.value=!r.value,r.value===!0?c.fire({title:"\u52A0\u5165\u6536\u85CF",color:"pink"}):c.fire({title:"\u79FB\u9664\u6536\u85CF",color:"pink"})}catch(s){c.fire({message:"\u5931\u6557",caption:((a=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:a.message)||"\u767C\u751F\u932F\u8AA4",color:"pink"})}};return(async()=>{try{const{data:e}=await x.get("/products/"+d.params.id);t._id=e.result._id,t.name=e.result.name,t.price=e.result.price,t.description=e.result.description,t.image=e.result.image,t.images=e.result.images,t.sell=e.result.sell,t.category=e.result.category,document.title="\u8CFC\u7269\u7DB2 | "+t.name,console.log(e.result.images);const{data:a}=await x.get("/products/");if(m.push(...a.result),q.value){const{data:s}=await w.get("/users/love/"+d.params.id);r.value=s.result}}catch{c.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u5546\u54C1\u5931\u6557"}),h.go(-1)}})(),(e,a)=>(n(),g("div",z,[l("div",G,[l("div",K,[o(B,{src:t.image,style:{width:"200px"}},null,8,["src"])]),l("div",X,[l("h3",H,_(t.name),1),l("h4",J,"$ "+_(t.price),1),l("p",ee,_(t.description),1),o(L,{class:"row q-mt-md flex items-center",onSubmit:C},{default:i(()=>[o(D,{class:"col-5 col-lg-2 q-pr-md",filled:"",modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=s=>u.value=s),modelModifiers:{number:!0},type:"number",label:"\u6578\u91CF",rules:[v.required,v.number],style:{height:"55px"}},null,8,["modelValue","rules"]),o(f,{class:"col-5 col-lg-3 q-pr-md",type:"submit",color:"primary",style:{height:"55px"}},{default:i(()=>[R("\u52A0\u5165\u8CFC\u7269\u8ECA")]),_:1}),o(f,{class:"col-2 col-lg-1 q-pa-md",flat:"",round:"",color:"red",size:"xl",icon:r.value?"fa-solid fa-heart":"fa-regular fa-heart",onClick:a[1]||(a[1]=s=>V({_id:t._id}))},null,8,["icon"])]),_:1})])]),l("div",te,[se,l("div",ae,[(n(!0),g(N,null,j(m.slice(0,4),s=>(n(),g("div",{key:m._id},[s._id!==t._id?(n(),U(I,F({key:0,style:{height:"100px",width:"250px"}},s),null,16)):M("",!0)]))),128))])]),o(A,{"v-model":!t.sell,persistent:""},{default:i(()=>[o(O,{class:"bg-accent text-white",style:{width:"300px"}},{default:i(()=>[o(T,null,{default:i(()=>[le]),_:1}),o(Y,{class:"bg-white text-accent",align:"right"},{default:i(()=>[E(o(f,{onClick:a[2]||(a[2]=s=>W(h).go(-1)),flat:"",label:"back"},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["v-model"])]))}};export{ie as default};
