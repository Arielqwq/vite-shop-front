import{Q as f,a as l}from"./QTable.bd778946.js";import{U as g,V as h,r as x,W as b,b1 as w,aY as i,j as v,k as y,l as c,d as s,X as a,G as n}from"./index.8c595520.js";import"./index.510b18f1.js";import"./QCheckbox.8140a97e.js";import"./QMenu.35bf2a2e.js";import"./QChip.7c7113a9.js";import"./QItemLabel.949b9462.js";import"./format.2a3572e1.js";const q={class:"q-pa-md",id:"wishlist"},k=c("h4",{class:"text-center"},"\u6211\u7684\u6536\u85CF",-1),B={class:"q-px-xl q-mt-md"},Q=["src"],E={__name:"WishlistView",setup(V){g();const d=h(),{removeLove:u}=d,m=x(""),t=b([]),p=async e=>{try{console.log(e),console.log(t);const o=t.findIndex(r=>r._id===e);console.log(t[o]._id),await u(t[o]._id),t.splice(o,1),i.fire({icon:"success",title:"\u6210\u529F",text:"\u5DF2\u5F9E\u6536\u85CF\u522A\u9664\u5546\u54C1"})}catch(o){console.log(o),i.fire({icon:"error",title:"\u5931\u6557",text:"\u522A\u9664\u5546\u54C1\u5931\u6557"})}},_=[{name:"name",required:!0,label:"\u5546\u54C1\u540D\u7A31",align:"center",field:e=>e.name,sortable:!0},{name:"image",required:!0,label:"\u5546\u54C1\u5716\u7247",align:"center",field:e=>e.image,sortable:!0},{name:"price",required:!0,label:"\u5546\u54C1\u50F9\u683C",align:"center",field:e=>e.price,sortable:!0},{name:"edit",required:!0,label:"\u7DE8\u8F2F",align:"center"},{name:"go",required:!0,label:"\u7DE8\u8F2F",align:"center"}];return(async()=>{try{const{data:e}=await w.get("/users/love");t.push(...e.result),console.log(t)}catch{i.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u6211\u7684\u6536\u85CF\u5931\u6557"})}})(),(e,o)=>(v(),y("div",q,[k,c("div",B,[s(f,{columns:_,rows:t,"row-key":"p_id",filter:m.value},{"body-cell-image":a(r=>[s(l,{class:"text-center"},{default:a(()=>[c("img",{src:r.row.image,style:{height:"100px"}},null,8,Q)]),_:2},1024)]),"body-cell-edit":a(r=>[s(l,{class:"text-center"},{default:a(()=>[s(n,{round:"",color:"accent",onClick:C=>p(r.row._id),icon:"fa-solid fa-trash-can"},null,8,["onClick"])]),_:2},1024)]),"body-cell-go":a(r=>[s(l,{class:"text-center"},{default:a(()=>[s(n,{class:"q-ml-md",size:"12px",icon:"fa-brands fa-golang",to:"../product/"+r.row._id,round:"",color:"primary"},null,8,["to"])]),_:2},1024)]),_:1},8,["rows","filter"])])]))}};export{E as default};
