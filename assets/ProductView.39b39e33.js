import{aZ as b,M as k,N as C,W as V,r as g,O as Q,aT as S,a_ as _,aV as n,j as $,k as j,l,d as a,a8 as q,a6 as d,P as i,U as A,a7 as B,R as L,G as p,Z as N,a5 as R,a$ as U,b0 as D,a2 as I,$ as M,a9 as O}from"./index.f2381c91.js";const P={id:"productView"},T={class:"row flex justify-center",style:{height:"500px",margin:"110px 0"}},E={class:"product-img col-12 col-lg-3 flex justify-center"},Y={class:"flex column no-wrap col-12 col-lg-7"},Z={class:"pre"},F=l("div",{class:"row flex justify-center",style:{height:"400px"}},[l("div",{class:"col-8"},[l("div",{class:"text-h5"},"YOU MAY ALSO LIKE")])],-1),G=l("h5",{class:"text-white text-weight-bold"},"\u8CE3\u5B8C\u310C\u9912",-1),z={__name:"ProductView",setup(K){const c=b(),m=k(),v=C(),{editCart:h,isLogin:x}=V(v),u=g(0),o=g(!1),f={required(e){return!!e||"\u6B04\u4F4D\u5FC5\u586B"},number(e){return e>0||"\u6578\u91CF\u932F\u8AA4"}},t=Q({_id:"",name:"",price:0,description:"",image:"",images:[],sell:!0,category:""}),y=()=>{h({_id:t._id,quantity:u.value,text:"\u52A0\u5165\u8CFC\u7269\u8ECA"})},w=async()=>{var e,s;try{const{data:r}=await _.post("/users/love",{p_id:c.params.id,love:!o.value});o.value=!o.value,o.value===!0?n.fire({title:"\u52A0\u5165\u6536\u85CF",color:"pink"}):n.fire({title:"\u79FB\u9664\u6536\u85CF",color:"pink"})}catch(r){n.fire({message:"\u5931\u6557",caption:((s=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:s.message)||"\u767C\u751F\u932F\u8AA4",color:"pink"})}};return(async()=>{try{const{data:e}=await S.get("/products/"+c.params.id);if(t._id=e.result._id,t.name=e.result.name,t.price=e.result.price,t.description=e.result.description,t.image=e.result.image,t.images=e.result.images,t.sell=e.result.sell,t.category=e.result.category,document.title="\u8CFC\u7269\u7DB2 | "+t.name,console.log(e.result.images),x.value){const{data:s}=await _.get("/users/love/"+c.params.id);o.value=s.result}}catch{n.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u5546\u54C1\u5931\u6557"}),m.go(-1)}})(),(e,s)=>($(),j("div",P,[l("div",T,[l("div",E,[a(q,{src:t.image,cover:"",style:{width:"200px"}},null,8,["src"])]),l("div",Y,[l("h3",null,d(t.name),1),l("p",null,"$ "+d(t.price),1),l("p",Z,d(t.description),1),a(A,{onSubmit:y},{default:i(()=>[a(L,{filled:"",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=r=>u.value=r),modelModifiers:{number:!0},type:"number",label:"\u6578\u91CF",rules:[f.required,f.number]},null,8,["modelValue","rules"]),a(p,{type:"submit",color:"primary"},{default:i(()=>[N("\u52A0\u5165\u8CFC\u7269\u8ECA")]),_:1}),a(p,{flat:"",round:"",color:"red",icon:o.value?"fa-solid fa-heart":"fa-regular fa-heart",onClick:s[1]||(s[1]=r=>w({_id:t._id}))},null,8,["icon"])]),_:1})])]),F,a(B,{"v-model":!t.sell,persistent:""},{default:i(()=>[a(R,{class:"bg-accent text-white",style:{width:"300px"}},{default:i(()=>[a(U,null,{default:i(()=>[G]),_:1}),a(D,{class:"bg-white text-accent",align:"right"},{default:i(()=>[I(a(p,{onClick:s[2]||(s[2]=r=>M(m).go(-1)),flat:"",label:"back"},null,512),[[O]])]),_:1})]),_:1})]),_:1},8,["v-model"])]))}};export{z as default};
