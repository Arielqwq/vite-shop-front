import{aY as b,M as k,N as C,W as Q,r as g,O as V,aS as S,aZ as _,aT as n,j,k as q,l,d as a,a7 as A,a5 as d,P as o,U as B,a6 as L,R as N,G as p,a3 as R,a4 as U,a_ as Y,a$ as $,a0 as D,Y as I,a8 as M}from"./index.884d5890.js";const O={id:"productView"},P={class:"row flex justify-center",style:{height:"500px",margin:"0 0 110px 0"}},T={class:"product-img col-12 col-lg-3 flex justify-center"},E={class:"flex column no-wrap col-12 col-lg-7"},F={class:"pre"},G=l("div",{class:"row flex justify-center",style:{height:"400px"}},[l("div",{class:"col-10"},[l("div",{class:"text-h5"},"YOU MAY ALSO LIKE")])],-1),K=l("h5",{class:"text-white text-weight-bold"},"\u8CE3\u5B8C\u310C\u9912",-1),z={__name:"ProductView",setup(W){const c=b(),m=k(),v=C(),{editCart:h,isLogin:x}=Q(v),u=g(0),i=g(!1),f={required(e){return!!e||"\u6B04\u4F4D\u5FC5\u586B"},number(e){return e>0||"\u6578\u91CF\u932F\u8AA4"}},t=V({_id:"",name:"",price:0,description:"",image:"",images:[],sell:!0,category:""}),y=()=>{h({_id:t._id,quantity:u.value,text:"\u52A0\u5165\u8CFC\u7269\u8ECA"})},w=async()=>{var e,s;try{const{data:r}=await _.post("/users/love",{p_id:c.params.id,love:!i.value});i.value=!i.value,i.value===!0?n.fire({title:"\u52A0\u5165\u6536\u85CF",color:"pink"}):n.fire({title:"\u79FB\u9664\u6536\u85CF",color:"pink"})}catch(r){n.fire({message:"\u5931\u6557",caption:((s=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:s.message)||"\u767C\u751F\u932F\u8AA4",color:"pink"})}};return(async()=>{try{const{data:e}=await S.get("/products/"+c.params.id);if(t._id=e.result._id,t.name=e.result.name,t.price=e.result.price,t.description=e.result.description,t.image=e.result.image,t.images=e.result.images,t.sell=e.result.sell,t.category=e.result.category,document.title="\u8CFC\u7269\u7DB2 | "+t.name,x.value){const{data:s}=await _.get("/users/love/"+c.params.id);i.value=s.result}}catch{n.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u5546\u54C1\u5931\u6557"}),m.go(-1)}})(),(e,s)=>(j(),q("div",O,[l("div",P,[l("div",T,[a(A,{src:t.image,cover:"",style:{width:"200px"}},null,8,["src"])]),l("div",E,[l("h3",null,d(t.name),1),l("p",null,"$ "+d(t.price),1),l("p",F,d(t.description),1),a(B,{onSubmit:y},{default:o(()=>[a(N,{filled:"",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=r=>u.value=r),modelModifiers:{number:!0},type:"number",label:"\u6578\u91CF",rules:[f.required,f.number]},null,8,["modelValue","rules"]),a(p,{type:"submit",color:"primary"},{default:o(()=>[R("\u52A0\u5165\u8CFC\u7269\u8ECA")]),_:1}),a(p,{flat:"",round:"",color:"red",icon:i.value?"fa-solid fa-heart":"fa-regular fa-heart",onClick:s[1]||(s[1]=r=>w({_id:t._id}))},null,8,["icon"])]),_:1})])]),G,a(L,{"v-model":!t.sell,persistent:""},{default:o(()=>[a(U,{class:"bg-accent text-white",style:{width:"300px"}},{default:o(()=>[a(Y,null,{default:o(()=>[K]),_:1}),a($,{class:"bg-white text-accent",align:"right"},{default:o(()=>[D(a(p,{onClick:s[2]||(s[2]=r=>I(m).go(-1)),flat:"",label:"back"},null,512),[[M]])]),_:1})]),_:1})]),_:1},8,["v-model"])]))}};export{z as default};
