import{M as h,aM as g,aH as p,j as x,k as C,l,d as s,C as m,a1 as _,$ as b,N as n,a0 as k,aP as v,X as B,V as D,aO as S,a2 as U,Q as I}from"./index.d65890ce.js";import{Q as N}from"./QTooltip.0c855914.js";import{a as A,Q as w,C as F}from"./QForm.ffe3ee3a.js";import{Q as j}from"./QFile.c22452d4.js";import{Q as M}from"./use-key-composition.e5e45876.js";import"./position-engine.7f17bd70.js";import"./use-prevent-scroll.2c9c4867.js";import"./QChip.ac7192c3.js";import"./format.2a3572e1.js";const P={id:"admin-aboutUs"},R=l("h3",{class:"text-center"},"\u95DC\u65BC\u6211\u5011\u7BA1\u7406",-1),T={class:"div q-px-xl row"},$={class:"col-12"},E={class:"q-px-xl q-mt-md"},H={style:{width:"80%",height:"500px","border-radius":"30px","background-color":"rgb(255, 245, 238)",padding:"20px"}},O=["src"],X={class:"div q-pa-md row",align:"left"},z={class:"text-center"},G={class:"col-12"},J={class:"col-12"},K={class:"col-5"},L=l("div",{class:"row"},null,-1),de={__name:"AboutusView",setup(W){const f={required(i){return!!i||"\u6B04\u4F4D\u5FC5\u586B"}},V=()=>{e.image=[]},a=h([]),e=h({_id:"",title:"",image:void 0,description:""}),Q=i=>{i===-1&&(e.title="",e.image=void 0,e.description=""),e.dialog=!0},y=()=>{e.title="",e.image=void 0,e.description=""},q=async()=>{var t,o;e.loading=!0;const i=new FormData;i.append("title",e.title),i.append("description",e.description),i.append("image",e.image);try{if(e._id.length===0){const{data:d}=await g.post("/aboutus",i);a.push(d.result),p.fire({icon:"success",title:"\u6210\u529F",text:"\u65B0\u589E\u6210\u529F"})}else{const{data:d}=await g.patch("/aboutus/"+e._id,i);console.log(d.result);const u=a.findIndex(r=>r._id===e._id);a[u]=d.result,p.fire({icon:"success",title:"\u6210\u529F",text:"\u7DE8\u8F2F\u6210\u529F"})}e.dialog=!1}catch(d){p.fire({icon:"error",title:"\u5931\u6557",text:((o=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:o.message)||"\u767C\u751F\u932F\u8AA4"})}e.loading=!1};return(async()=>{var i,t;try{const{data:o}=await g.get("/aboutus");a.push(...o.result),e._id=a[0]._id,e.title=a[0].title,e.image=a[0].image,e.description=a[0].description,console.log(e)}catch(o){p.fire({icon:"error",title:"\u5931\u6557",text:((t=(i=o==null?void 0:o.response)==null?void 0:i.data)==null?void 0:t.message)||"\u767C\u751F\u932F\u8AA4"})}})(),(i,t)=>{var o,d,u;return x(),C("div",P,[R,l("div",T,[l("div",$,[s(m,{onClick:t[0]||(t[0]=r=>Q(e._id.length>0?0:-1)),color:"primary",label:"\u7DE8\u8F2F"})])]),l("div",E,[l("div",H,[l("h5",null,"\u6A19\u984C\uFF1A "+_((o=a[0])==null?void 0:o.title),1),l("h6",null,"\u5167\u5BB9\uFF1A "+_((d=a[0])==null?void 0:d.description),1),l("h6",null,[b("\u5716\u7247\uFF1A"),l("img",{src:(u=a[0])==null?void 0:u.image,style:{height:"100px"}},null,8,O)])]),s(M,{align:"center",modelValue:e.dialog,"onUpdate:modelValue":t[4]||(t[4]=r=>e.dialog=r),persistent:""},{default:n(()=>[s(k,{class:"column",style:{width:"700px","max-width":"80vw"}},{default:n(()=>[s(A,{onSubmit:q,onReset:y},{default:n(()=>[s(v,{class:"row flex justify-between"},{default:n(()=>[l("div",X,[l("div",z,_(e._id.length>0?"\u7DE8\u8F2F\u95DC\u65BC\u6211\u5011":"\u65B0\u589E\u95DC\u65BC\u6211\u5011"),1)]),B((x(),D(m,{dense:"",flat:"",icon:"close"},{default:n(()=>[s(N,null,{default:n(()=>[b("Close")]),_:1})]),_:1})),[[F]])]),_:1}),s(S,{class:"column q-gutter-md"},{default:n(()=>{var r;return[l("div",G,[s(w,{square:"",filled:"",modelValue:e.title,"onUpdate:modelValue":t[1]||(t[1]=c=>e.title=c),label:"\u95DC\u65BC\u6211\u5011\u6A19\u984C",rules:[f.required]},null,8,["modelValue","rules"])]),l("div",J,[s(w,{square:"",filled:"",modelValue:e.description,"onUpdate:modelValue":t[2]||(t[2]=c=>e.description=c),type:"textarea",label:"\u95DC\u65BC\u6211\u5011\u5167\u5BB9",rules:[f.required]},null,8,["modelValue","rules"])]),l("div",K,[L,s(U,{src:(r=a[e.idx])==null?void 0:r.image,style:{height:"100px"}},null,8,["src"]),s(j,{filled:"",modelValue:e.image,"onUpdate:modelValue":t[3]||(t[3]=c=>e.image=c),label:"\u8ACB\u4E0A\u50B3\u5716\u7247",style:{"max-height":"50px"}},{append:n(()=>[s(I,{name:"close",onClick:V})]),_:1},8,["modelValue"])])]}),_:1}),s(v,{align:"right"},{default:n(()=>[s(m,{disabled:e.loading,flat:"",label:"reset",type:"reset",color:"red"},null,8,["disabled"]),s(m,{disabled:e.loading,flat:"",label:"submit",type:"submit",color:"green"},null,8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])}}};export{de as default};
